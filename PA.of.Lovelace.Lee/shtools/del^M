#!/bin/bash
#This del^M auto generated by shtoolsgenerater.
#Copyright by Lovelace.Lee.
#Version 2013.10.23

FILENAME=""

function print_help()
{
    echo ""
    echo "Usage: del^M [-options]"
    echo "  (-help|--help):     show help information"
    echo "  (-f=filename):      show help information"
    echo ""
}


#parse ARGS
#$* all args list passed by user
function parseARGS()
{
    for arg in $*
    do
        #two arg type -arg or arg=value
        lvalue=`echo $arg | sed 's/=.*//g'`
        rvalue=`echo $arg | sed 's/.*=//g'`
        if [ -n "$arg" ];then #arg exist
            case $lvalue in
            -help|--help|--h|--he|--hel-h|-he|-hel)
                print_help
                exit 0;;
            -f)
                FILENAME=$rvalue;;
            *) 
                echo "Unknown option "
                return 110
                ;;
            esac
        fi
    done
}

function deleteCtlM()
{
    cat $1 | tr -d "
" > temp
    chmod 777 temp
    rm -rf $1
    mv temp $1
}

if [ $# -lt 1 ];then
    print_help
    exit
fi
parseARGS $*;
if [ $? == 110 ];then
    #need help
    print_help
    exit 1;
fi

deleteCtlM $FILENAME;
